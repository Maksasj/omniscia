project(OmnisciaTests)
cmake_minimum_required(VERSION 3.1)

enable_testing()

include_directories("./")
include_directories("../../src")

function(CREATE_TEST TEST_NAME TEST_FILE)
    file(GLOB_RECURSE OMNISCIA-SRC "../../../../src/*.cpp")
    list (APPEND OMNISCIA-SRC ${IMGUI-SRC})
    list(REMOVE_ITEM OMNISCIA-SRC "C:/Programming/c++/omniscia/tests/game/ecs/collisions/../../../../src/main.cpp")
    list(APPEND OMNISCIA-SRC ${TEST_FILE})

    add_executable(${TEST_NAME} ${OMNISCIA-SRC})
    target_link_libraries(${TEST_NAME} ${OPENGL_LIBRARIES})
    target_link_libraries(${TEST_NAME} glfw)
    target_link_libraries(${TEST_NAME} glad)
    target_link_libraries(${TEST_NAME} opengl32)

    add_test(NAME ${TEST_NAME} COMMAND $<TARGET_FILE:${TEST_NAME}>)
endfunction()

add_subdirectory(types)
add_subdirectory(ecs)
